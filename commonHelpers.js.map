{"version":3,"file":"commonHelpers.js","sources":["../js/pixabay-api.js","../js/render-functions.js","../src/img/caution.svg","../src/img/error.svg","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst KEY = '42472601-e2efb745d6431960b7108569a';\nconst PER_PAGE = 15;\n\nexport async function fetchImages(search, page = 1) {\n    const url = `https://pixabay.com/api/?key=${KEY}&q=${search}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}`;\n\n    try {\n        const response = await axios.get(url);\n\n        if (response.status !== 200) {\n            throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n        \n        return response.data;\n    } catch (error) {\n        throw new Error(`Error fetching images: ${error.message}`);\n    }\n}\n\n","//бібліотеки\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst LOADER = document.getElementById('loader');\nconst GALLERY = document.getElementById('gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport async function showImages(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<div class=\"card\">\n      <a href=\"${largeImageURL}\" data-lightbox=\"gallery\" data-title=\"${tags}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\"/>\n      </a>\n      <div class=\"card-border\">\n      <div class=\"param\">\n      <p class=\"title\">Likes:</p>\n      <p class=\"title\">Views:</p>\n      <p class=\"title\">Comments:</p>\n      <p class=\"title\">Downloads:</p>\n       </div>\n        <div class=\"param\">\n      <p class=\"title-value\">${likes}</p>\n      <p class=\"title-value\">${views}</p>\n      <p class=\"title-value\">${comments}</p>\n      <p class=\"title-value\">${downloads}</p>\n       </div>\n      </div>\n    </div>`);\n\n    GALLERY.innerHTML = markup.join('');\n\n    const imgLoad = GALLERY.querySelectorAll('img');\n    const loadDelay = Array.from(imgLoad).map(img =>\n        new Promise((resolve, reject) => {\n            img.onload = resolve;\n            img.onerror = reject;\n        })\n    );\n\n    try {\n        await Promise.all(loadDelay);\n        LOADER.style.display = 'none';\n        lightbox.refresh()\n    } catch (error) {\n            console.error('Error loading images:', error);\n        }\n    }\n    \n        \n           ","export default \"__VITE_ASSET__02852ca5__\"","export default \"__VITE_ASSET__8479b7dd__\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\nimport { fetchImages } from \"../js/pixabay-api\";\nimport { showImages } from \"../js/render-functions\";\n\nimport cautionIcon from './img/caution.svg';\nimport errorIcon from './img/error.svg';\n\n\nconst LOADER = document.getElementById('loader');\nconst GALLERY = document.getElementById('gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\nconst SEARCH_FORM = document.getElementById('search-form');\nconst SEARCH_INPUT = document.getElementById('search-input');\nconst LOAD_MORE_BUTTON = document.getElementById('load-more-btn');\n\n// пагінація\nlet currentPage = 1;\nlet currentQuery = \"\";\n\nfunction toggleLoadMoreButton(show) {\n    LOAD_MORE_BUTTON.style.display = show ? 'block' : 'none';\n}\n\nasync function loadMoreImages() {\n    LOADER.style.display = 'block';\n\n    try {\n        currentPage += 1;\n        const data = await fetchImages(currentQuery, currentPage);\n\n        if (data.hits.length > 0) {\n            showImages(data.hits);\n            const cardHeight = GALLERY.querySelector('.card').getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\",\n            });\n        \n        } else {\n            iziToast.warning({\n                title: 'No more results',\n                message: 'There are no more images for this search',\n                theme: 'dark',\n                position: 'topRight',\n                backgroundColor: '#ffa000',\n                messageColor: '#fafafb',\n                iconUrl: cautionIcon,\n            });\n            if (currentPage === 1) {\n                LOAD_MORE_BUTTON.style.display = 'none';\n            } else {\n                LOAD_MORE_BUTTON.disabled = true;\n            }  \n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occured while fetching more images. Please try again'\n        });\n        console.error('Error fetching more images:', error);\n    } finally {\n        LOADER.style.display = 'none';\n    }\n\n}\n\nLOAD_MORE_BUTTON.addEventListener('click', loadMoreImages);\n\nasync function searchFormSubmit(event) {\n    event.preventDefault();\n    currentPage = 1;\n    const query = SEARCH_INPUT.value.trim();\n     currentQuery = query;\n\n    if (query === \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term!',\n            theme: 'dark',\n            position: 'topRight',\n            backgroundColor: '#ef4040',\n            messageColor: '#fafafb',\n            iconUrl: errorIcon,\n        });\n        return;\n    }\n\n\n    LOADER.style.display = 'block';\n    GALLERY.innerHTML = \"\";\n    toggleLoadMoreButton(false);\n\n    try {\n        const data = await fetchImages(currentQuery);\n\n        if (data.hits.length === 0) {\n            iziToast.warning({\n                title: 'No results',\n                message: 'Sorry, there are no images matching your search.Please try again!',\n                theme: 'dark',\n                position: 'topRight',\n                backgroundColor: '#ffa000',\n                messageColor: '#fafafb',\n                iconUrl: cautionIcon\n            });\n        } else {\n            showImages(data.hits);\n            toggleLoadMoreButton(true);\n        }\n        \n    } catch (error) {\n            iziToast.error({\n                title: 'Error',\n                message: 'An error occurred while fetching images. Please try again!'\n            });\n    \n            console.error('Error fetching images:', error);\n    } finally {\n         setTimeout(() => {\n            LOADER.style.display = 'none';\n        }, 1500);\n    }\n}\n\nSEARCH_FORM.addEventListener('submit', searchFormSubmit);\n\n"],"names":["KEY","fetchImages","search","page","url","response","axios","error","LOADER","GALLERY","lightbox","SimpleLightbox","showImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgLoad","loadDelay","img","resolve","reject","cautionIcon","errorIcon","SEARCH_FORM","SEARCH_INPUT","LOAD_MORE_BUTTON","currentPage","currentQuery","toggleLoadMoreButton","show","loadMoreImages","data","cardHeight","iziToast","searchFormSubmit","event","query"],"mappings":"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"}