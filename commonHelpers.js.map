{"version":3,"file":"commonHelpers.js","sources":["../js/pixabay-api.js","../js/render-functions.js","../src/img/caution.svg","../src/img/error.svg","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst KEY = '42472601-e2efb745d6431960b7108569a';\n\nexport async function fetchImages(search) {\n    const url = `https://pixabay.com/api/?key=${KEY}&q=${search}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n    try {\n        const response = await axios.get(url);\n\n        if (response.status !== 200) {\n            throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n        \n        return response.data;\n    } catch (error) {\n        throw new Error(`Error fetching images: ${error.message}`);\n    }\n}\n","//бібліотеки\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst LOADER = document.getElementById('loader');\nconst GALLERY = document.getElementById('gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function showImages(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<div class=\"card\">\n      <a href=\"${largeImageURL}\" data-lightbox=\"gallery\" data-title=\"${tags}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\"/>\n      </a>\n      <div class=\"card-border\">\n      <div class=\"param\">\n      <p class=\"title\">Likes:</p>\n      <p class=\"title\">Views:</p>\n      <p class=\"title\">Comments:</p>\n      <p class=\"title\">Downloads:</p>\n       </div>\n        <div class=\"param\">\n      <p class=\"title-value\">${likes}</p>\n      <p class=\"title-value\">${views}</p>\n      <p class=\"title-value\">${comments}</p>\n      <p class=\"title-value\">${downloads}</p>\n       </div>\n      </div>\n    </div>`);\n\n    GALLERY.innerHTML = markup.join('');\n\n    const imgLoad = GALLERY.querySelectorAll('img');\n    const loadDelay = Array.from(imgLoad).map(img =>\n        new Promise((resolve, reject) => {\n            img.onload = resolve;\n            img.onerror = reject;\n        })\n    );\n\n    Promise.all(loadDelay)\n        .then(() => {\n            LOADER.style.display = 'none';\n        })\n        .catch((error) => {\n            console.error('Error loading images:', error);\n        });\n\n    lightbox.refresh()\n}","export default \"__VITE_ASSET__02852ca5__\"","export default \"__VITE_ASSET__8479b7dd__\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImages } from \"../js/pixabay-api\";\nimport { showImages } from \"../js/render-functions\";\n\nimport cautionIcon from './img/caution.svg';\nimport errorIcon from './img/error.svg';\n\nconst LOADER = document.getElementById('loader');\nconst GALLERY = document.getElementById('gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\nconst SEARCH_FORM = document.getElementById('search-form');\nconst SEARCH_INPUT = document.getElementById('search-input');\n\n// пагінація\nconst PAGE_SIZE = 15;\nlet currentPage = 1;\n\nconst LOAD_MORE_BUTTON = document.querySelector('button[type=\"button\"]');\n\nasync function loadMoreImages() {\n    currentPage += 1;\n\n    const query = SEARCH_INPUT.value.trim();\n    LOADER.style.display = 'block';\n\n    try {\n        const data = await fetchImages(query, currentPage, PAGE_SIZE);\n\n        if (data.hits.length > 0) {\n            showImages(data.hits);\n        } else {\n            iziToast.warning({\n                title: 'No more results',\n                message: 'There are no more images for this search',\n                theme: 'dark',\n                position: 'topRight',\n                backgroundColor: '#ffa000',\n                messageColor: '#fafafb',\n                iconUrl: cautionIcon,\n            });\n            LOAD_MORE_BUTTON.disabled = 'true';\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occured while fetching more images. Please try again'\n        });\n        console.error('Error fetching more images:', error);\n    } finally {\n        LOADER.style.display = 'none';\n    }\n\n}\n\nLOAD_MORE_BUTTON.addEventListener('click', loadMoreImages);\n\nasync function searchFormSubmit(event) {\n    event.preventDefault();\n    currentPage = 1;\n    const query = SEARCH_INPUT.value.trim();\n\n    if (query === \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term!',\n            theme: 'dark',\n            position: 'topRight',\n            backgroundColor: '#ef4040',\n            messageColor: '#fafafb',\n            iconUrl: errorIcon,\n        });\n        return;\n    }\n\n\n    LOADER.style.display = 'block';\n\n    GALLERY.innerHTML = \"\";\n\n\n    try {\n        const data = await fetchImages(query);\n\n        if (data.hits.length === 0) {\n            iziToast.warning({\n                title: 'No results',\n                message: 'Sorry, there are no images matching your search.Please try again!',\n                theme: 'dark',\n                position: 'topRight',\n                backgroundColor: '#ffa000',\n                messageColor: '#fafafb',\n                iconUrl: cautionIcon\n            });\n        } else {\n            showImages(data.hits);\n        }\n        \n    } catch (error) {\n            LOADER.style.display = 'none';\n\n            iziToast.error({\n                title: 'Error',\n                message: 'An error occurred while fetching images. Please try again!'\n            });\n    \n            console.error('Error fetching images:', error);\n    } finally {\n         setTimeout(() => {\n            LOADER.style.display = 'none';\n        }, 1500);\n    }\n}\n\nSEARCH_FORM.addEventListener('submit', searchFormSubmit);\n\n"],"names":["KEY","fetchImages","search","url","response","axios","error","LOADER","GALLERY","lightbox","SimpleLightbox","showImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgLoad","loadDelay","img","resolve","reject","cautionIcon","errorIcon","SEARCH_FORM","SEARCH_INPUT","PAGE_SIZE","currentPage","LOAD_MORE_BUTTON","loadMoreImages","query","data","iziToast","searchFormSubmit","event"],"mappings":"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"}